{% extends 'chat/home.html' %}
{% block subcontent %}
    <h1>{{ recipient }}</h1>
    {% if not is_friends %}
        <p>You cannot message this user because they are not on your friends list</p>
    {% endif %}
    <form method="POST" action="{% url 'direct_message' recipient.username %}">
        {% csrf_token %}
        {{ form }}
        <button type="submit">Send</button>
    </form>
    <p>New messages</p>
    {% for message in all_messages.new %}
    <ul>
        <li>From: {{ message.sender }}</li>
        <li>To: {{ message.recipient }}</li>
        <li style="white-space: pre-wrap;">{{ message.content }}</li>
        <li>{{ message.timestamp }}</li>
        <li>Read: {{ message.read }}</li>
    </ul>
    {% endfor %}
    <p>Old messages</p>
    {% for message in all_messages.old %}
        <ul>
            <li>From: {{ message.sender }}</li>
            <li>To: {{ message.recipient }}</li>
            <li style="white-space: pre-wrap;">{{ message.content }}</li>
            <li>{{ message.timestamp }}</li>
            <li>Read: {{ message.read }}</li>
        </ul>
    {% endfor %}
{% endblock subcontent %}